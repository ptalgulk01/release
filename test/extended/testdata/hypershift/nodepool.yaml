kind: Template
apiVersion: template.openshift.io/v1
metadata:
  name: nodepool-template
objects:
  - apiVersion: hypershift.openshift.io/v1alpha1
    kind: NodePool
    metadata:
      name: "${NAME}"
      namespace: "${NAMESPACE}"
    spec:
      clusterName: "${CLUSTER_NAME}"
      management:
        autoRepair: ${{AUTO_REPAIR}}
        replace:
          rollingUpdate:
            maxSurge: 1
            maxUnavailable: 0
          strategy: RollingUpdate
        upgradeType: Replace
      platform:
        aws:
          instanceType: m5.large
          rootVolume:
            iops: ${{ROOT_VOLUME_IOPS}}
            size: ${{ROOT_VOLUME_SIZE}}
            type: "${ROOT_VOLUME_TYPE}"
        type: AWS
      release:
        image: "${RELEASE_IMAGE}"
      replicas: ${{REPLICAS}}
parameters:
  - name: NAME
    required: true
  - name: NAMESPACE
    value: "clusters"
  - name: CLUSTER_NAME
    required: true
  - name: ROOT_VOLUME_TYPE
    value: "gp3"
  - name: ROOT_VOLUME_SIZE
    value: "120"
  - name: RELEASE_IMAGE
    value: "registry.ci.openshift.org/ocp/release:4.11.0-fc.0"
  - name: REPLICAS
    value: "1"
  - name: ROOT_VOLUME_IOPS
    value: "null"
  - name: AUTO_REPAIR
    value: "false"

