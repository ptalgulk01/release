apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: monitoring-config-template
objects:
- apiVersion: v1
  kind: ConfigMap
  metadata:
    name: "${NAME}"
    namespace: "${NAMESPACE}"
  data:
    config.yaml: |
      enableUserWorkload: ${ENABLEUSERWORKLOAD}
      prometheusK8s:
        logLevel: debug
        queryLogFile: /tmp/promethues_query.log
        retentionSize: 10GiB
        retention: 45d
        remoteWrite:
        - url: "https://authorization.remotewrite.com/api/write"
          sigv4:
            region: us-central1
            accessKey:
              name: sigv4-credentials
              key: access
            secretKey:
              name: sigv4-credentials
              key: secret
            profile: "SomeProfile"
            roleArn: "SomeRoleArn"
      alertmanagerMain:
        logLevel: debug
      k8sPrometheusAdapter:
        audit:
          profile: Request
      thanosQuerier:
        enableRequestLogging: true
        logLevel: debug
parameters:
- name: NAME
- name: NAMESPACE
- name: ENABLEUSERWORKLOAD
