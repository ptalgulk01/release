apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: kafka-topic-consumer-template
objects:
  - apiVersion: batch/v1
    kind: Job
    metadata:
      name: ${NAME}
      namespace: ${NAMESPACE}
    spec:
      ttlSecondsAfterFinished: 60
      template:
        spec:
          containers:
          - name: kakfa-consumer
            image: ${KAFKA_IMAGE}
            command: ["bin/kafka-console-consumer.sh","--bootstrap-server", "${CLUSTER_NAME}-kafka-bootstrap:9092", "--topic", "${KAFKA_TOPIC}", "--from-beginning"]
          restartPolicy: Never
parameters:
- name: KAFKA_IMAGE
  value: "registry.redhat.io/amq7/amq-streams-kafka-25-rhel7@sha256:e719f662bd4d6b8c54b1ee2e47c51f8d75a27a238a51d9ee38007187b3a627a4"
- name: KAFKA_TOPIC
  value: "network-flows-export"
- name: NAMESPACE
  value: "netobserv"
- name: NAME
  value: "network-flows-export-consumer"
- name: CLUSTER_NAME
  value: "kafka-cluster"
