apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: testrun-cm-template
objects:
  - apiVersion: v1
    kind: ConfigMap
    metadata:
      name: "${NAME}"
      namespace: "${NAMESPACE}"
    data:
      exists: "${EXISTS}"
      icspneeded: "${ICSPNEEDED}"
      catalogsourcename: "${CATSOURCENAME}"
      channel: "${OSCCHANNEL}"
      operatorVer: "${OPERATORVER}"
      katamonitormage: "${KATAMONITORIMAGE}"
      mustgatherimage: "${MUSTGATHERIMAGE}"
      runtimeClassName: "${RUNTIMECLASSNAME}"
      enablePeerPods: "${ENABLEPEERPODS}"
      eligibleSingleNode: "${ELIGIBLESINGLENODE}"
      eligibility: "${ELIGIBILITY}"
      labelSingleNode: "${LABELSINGLENODE}"

parameters:
  - name: NAME
    value: "osc-config"
  - name: NAMESPACE
    value: "default"
  - name: CATSOURCENAME
    value: "redhat-operators"
  - name: ICSPNEEDED
    value: "false"
  - name: OSCCHANNEL
    value: "stable-1.3"
  - name: OPERATORVER
    value: "1.3.0"
  - name: KATAMONITORIMAGE
    value: "registry.redhat.io/openshift-sandboxed-containers/osc-monitor-rhel8:1.3.3"
  - name: MUSTGATHERIMAGE
    value: "registry.redhat.io/openshift-sandboxed-containers/osc-must-gather-rhel8:1.3.3"
  - name: EXISTS
    value: "true"
  - name: RUNTIMECLASSNAME
    value: "kata"
  - name: ENABLEPEERPODS
    value: "false"
  - name: ELIGIBLESINGLENODE
    value: "false"
  - name: ELIGIBILITY
    value: "false"
  - name: LABELSINGLENODE
    value: "false"
# oc process --ignore-unknown-parameters=true -f configmap-input-template.yaml -p [name]=[value] [name]=[value] > osc-config.yaml...
# oc apply -f osc-config.yaml
# This is for Jenkins/end user to create a configmap and apply it to your cluster
# The catalog source for pre GA brew images would also be created by jenkins/end user
#
# getTestRunInput will read the configmap and its values
#  subscription
#  kata-monitor image
#  mustgather image
#  these can be used to alter the intial values in BeforeEach or to upgrade an existing subscription
#

