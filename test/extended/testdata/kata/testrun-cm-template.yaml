apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: testrun-cm-template
objects:
  - apiVersion: v1
    kind: ConfigMap
    metadata:
      name: "${NAME}"
      namespace: "${NAMESPACE}"
    data:
      exists: "${EXISTS}"
      redirectNeeded: "${ICSPNEEDED}"
      catalogsourcename: "${CATSOURCENAME}"
      channel: "${OSCCHANNEL}"
      operatorVer: "${OPERATORVER}"
      mustgatherimage: "${MUSTGATHERIMAGE}"
      runtimeClassName: "${RUNTIMECLASSNAME}"
      enablePeerPods: "${ENABLEPEERPODS}"
      eligibleSingleNode: "${ELIGIBLESINGLENODE}"
      eligibility: "${ELIGIBILITY}"
      labelSingleNode: "${LABELSINGLENODE}"
      enableGPU: "${ENABLENVIDIAGPU}"
      podvmImageUrl: "${PODVMIMAGEURL}"

# oc process --ignore-unknown-parameters=true -f configmap-input-template.yaml -p [name]=[value] [name]=[value] > osc-config.yaml...
# oc apply -f osc-config.yaml

parameters:
  - name: NAME
    value: "osc-config"
  - name: NAMESPACE
    value: "default"
  - name: CATSOURCENAME
    value: "redhat-operators"
  - name: ICSPNEEDED
    value: "false"
  - name: OSCCHANNEL
    value: "stable"
  - name: OPERATORVER
    value: "1.5.0"
  - name: MUSTGATHERIMAGE
    value: "registry.redhat.io/openshift-sandboxed-containers/osc-must-gather-rhel9:1.5.0"
  - name: EXISTS
    value: "true"
  - name: RUNTIMECLASSNAME
    value: "kata"
  - name: ENABLEPEERPODS
    value: "false"
  - name: ELIGIBLESINGLENODE
    value: "false"
  - name: ELIGIBILITY
    value: "false"
  - name: LABELSINGLENODE
    value: "false"
  - name: ENABLENVIDIAGPU
    value: "false"
  - name: PODVMIMAGEURL
    value: "https://raw.githubusercontent.com/bpradipt/sandboxed-containers-operator/pvm-img-fix/config/peerpods/podvm/"
