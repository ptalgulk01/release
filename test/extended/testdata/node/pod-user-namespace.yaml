apiVersion: template.openshift.io/v1
kind: Template
metadata:
  name: pod-user-namespace
objects:
- kind: Pod
  apiVersion: v1
  metadata:
    name: "${NAME}"
    namespace: "${NAMESPACE}"
    annotations:
      io.openshift.builder: "true"
      io.kubernetes.cri-o.userns-mode: "auto"
  spec:
    securityContext:
      runAsUser: 1000
      seccompProfile:
        type: RuntimeDefault
    containers:
    - name: userns-test-1
      image: quay.io/openshifttest/centos@sha256:285bc3161133ec01d8ca8680cd746eecbfdbc1faa6313bd863151c4b26d7e5a5
      securityContext:
        allowPrivilegeEscalation: false
        capabilities:
          drop:
          - ALL
      command: ["sleep", "3601"]
parameters:      
- name: NAME
- name: NAMESPACE
